# Sinwave - サイン波音声生成ツール

## 概要

このコマンドは、指定した周波数・継続時間・振幅でサイン波音声を生成し、WAVファイルとして保存するツールです。音響テスト、楽器の調律、音声信号処理の学習などに使用できます。また、生成したサイン波データをC言語の配列形式で出力する機能も提供します。

## 機能

- 任意の周波数のサイン波を生成
- サンプリング周波数、継続時間、振幅を自由に設定可能
- 16bit PCM形式のWAVファイルとして出力
- 生成されたPCMデータの一部をコンソールに表示
- **C言語配列形式での出力（1サイクル分または全データ）**

## 起動パラメータ

```bash
./sinwave <sample_rate> <frequency> <duration> [amplitude] [output_file] [--c-array] [--c-cycle]
```

### 必須パラメータ

- `sample_rate`：サンプリング周波数（Hz）
  - 例：44100（CD品質）、48000（デジタルオーディオ標準）
- `frequency`：生成するサイン波の周波数（Hz）
  - 例：440（A4音）、880（A5音）
- `duration`：音声の継続時間（秒）
  - 例：1.0（1秒）、0.5（0.5秒）

### オプションパラメータ

- `amplitude`：音声の振幅（0.0～1.0の範囲）
  - デフォルト：0.8
  - 1.0に近いほど音量が大きくなります
- `output_file`：出力WAVファイル名
  - デフォルト：output.wav

### C配列出力オプション

- `--c-array`：指定した継続時間分の全データをC言語配列形式で出力
  - 出力ファイル：`[output_file]_week.c`
  - 配列名：`sine_wave_week`
- `--c-cycle`：1サイクル分のデータのみをC言語配列形式で出力
  - 出力ファイル：`[output_file]_cycle.c`
  - 配列名：`sine_wave_cycle`
  - サイクル数は自動計算（sample_rate / frequency）

## サンプルコマンド

### 基本的な使用例

```bash
# A4音（440Hz）を1秒間、CD品質（44.1kHz）で生成
./sinwave 44100 440 1.0

# A5音（880Hz）を0.5秒間、48kHzサンプリングレートで生成
./sinwave 48000 880 0.5

# C音（261.6Hz）を2秒間、振幅0.5で生成
./sinwave 44100 261.6 2.0 0.5

# 高周波テスト音（8000Hz）を1秒間、指定ファイル名で保存
./sinwave 44100 8000 1.0 0.8 high_freq_test.wav
```

### C配列出力の使用例

```bash
# 1サイクル分のC配列を生成（マイコン開発などに便利）
./sinwave 44100 440 1.0 0.8 output.wav --c-cycle

# 全データをC配列として出力
./sinwave 44100 440 1.0 0.8 output.wav --c-array

# 複数のオプションを同時指定
./sinwave 48000 1000 0.5 0.9 test.wav --c-cycle --c-array
```

### 音楽関連の使用例

```bash
# 楽器調律用のA音（440Hz）
./sinwave 44100 440 3.0 0.7 tuning_A4.wav

# オクターブテスト用の音階
./sinwave 44100 220 1.0 0.6 A3.wav  # A3音
./sinwave 44100 440 1.0 0.6 A4.wav  # A4音
./sinwave 44100 880 1.0 0.6 A5.wav  # A5音

# 低い周波数のテスト音
./sinwave 44100 60 2.0 0.5 low_freq_test.wav
```

## ビルド方法

```bash
# デバッグビルド
make

# またはCMakeを使用
mkdir build
cd build
cmake -DCMAKE_BUILD_TYPE=Debug ..
make
```

## 使用用途

- 音響測定・テスト
- 楽器の調律
- 音響機器の動作確認
- 音声信号処理の学習
- 周波数特性の測定
- スピーカーやヘッドフォンのテスト
- **マイコン・組み込み開発での波形データ生成**
- **DSP（デジタル信号処理）の学習・研究**

## C配列出力について

生成されるC配列ファイルには以下の情報が含まれます：

- サンプルデータ配列（`int16_t`形式）
- 配列サイズ情報
- 周波数・サンプリングレートなどのメタデータ
- コンパイル可能なC言語ソースコード形式

### 1サイクル分配列の特徴

- 正確に1周期分のサイン波データのみを含む
- データサイズが小さく、メモリ効率が良い
- 繰り返し再生により連続音を生成可能
- マイコンやDSPでの利用に最適

## 追記

このプログラムは、README.mdも含めて、完全にClaude 4.0で生成しました。この部分を書いているSeikenは、空のcmakeプロジェクトを作製し、サイン波を生成するプログラムを作成するように指示をしただけです。もうこんな時代なのですね。
